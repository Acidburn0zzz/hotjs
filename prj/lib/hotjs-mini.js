var hotjs=hotjs||{};(function(){hotjs.version=1;hotjs.inherit=function(f,e,j){function g(){}g.prototype=e.prototype;f.prototype=new g();f.prototype.constructor=f;f.supClass=e.prototype;f.supClass.constructor=e;for(var i in j){if(j.hasOwnProperty(i)&&i!=="prototype"){f.prototype[i]=j[i]}}};hotjs.base=function(k,e,q){var i=arguments.callee.caller;if(i.supClass){var g=Array.prototype.slice.call(arguments,1);var l=i.supClass.constructor;return l.apply(k,g)}var g=Array.prototype.slice.call(arguments,2);var m=false;for(var j=k.constructor;j;j=j.supClass&&j.supClass.constructor){if(j.prototype[e]===i){m=true}else{if(m){return j.prototype[e].apply(k,g)}}}if(k[e]===i){return k.constructor.prototype[e].apply(k,g)}else{throw Error("hotjs.base must be called in constructor")}};hotjs.log=function(j,k){if(typeof k=="undefined"){k=0}var f="";for(var e=0;e<k;e++){f+="  "}if(typeof j=="object"){console.log(f+typeof j+" {");for(var g in j){if(typeof j[g]=="object"){console.log(f+"  "+g+" ("+typeof j[g]+") = ");hotjs.log(j[g],k+1)}else{console.log(f+"  "+g+" ("+typeof j[g]+") = "+j[g])}}console.log(f+"}")}else{console.log(j)}};if(typeof Array.prototype.indexOf!=="function"){Array.prototype.indexOf=function(k,g){if(g==null||g==undefined){g=0}else{if(g<0){g=Math.max(0,this.length+g)}}for(var f=g,e=this.length;f<e;f++){if(this[f]===k){return f}}return -1}}if(typeof String.prototype.endsWith!=="function"){String.prototype.endsWith=function(e){return this.indexOf(e,this.length-e.length)!==-1}}hotjs.formatString=function(){var j=[];for(var g=0,e=arguments.length;g<e;g++){j.push(arguments[g])}var f=j[0];j.shift();return f.replace(/\{(\d+)\}/g,function(i,k){return j[k]})};hotjs.formatNumber=function(e,g){var f=""+e;while(f.length<g){f="0"+f}return f};hotjs.getFileName=function(e){return e.substring(e.lastIndexOf("/")+1)};hotjs.getDirPath=function(e){return e.substring(0,e.lastIndexOf("/"))};hotjs.getAbsPath=function(g,e){d=hotjs.getDirPath(e);do{if(g.substring(0,2)=="./"){g=g.substring(2);continue}if(d.length==0){break}if(g.substring(0,3)=="../"){g=g.substring(3);d=hotjs.getDirPath(d);continue}if(d.length>0){g=d+"/"+g;break}}while(1);return g};hotjs.require=function(l){var m=document,j="script";var g=m.getElementsByTagName(j);var k=g[g.length-1].src;l=hotjs.getAbsPath(l,k);for(var e=0;e<g.length;e++){if(g[e].src==l){return}}o=m.createElement(j);o.async=0;o.src=l;g[0].parentNode.insertBefore(o,g[0])};if(typeof requireScripts=="function"){hotjs.require=requireScripts}else{requireScripts=hotjs.require}var c=function(){this.elements=new Array();this.size=function(){return this.elements.length};this.isEmpty=function(){return(this.elements.length<1)};this.clear=function(){this.elements=new Array()};this.put=function(g,e){var j=false;for(var f=0;f<this.elements.length;f++){if(this.elements[f].key==g){j=true;this.elements[f].value=e;break}}if(j==false){this.elements.push({key:g,value:e})}};this.remove=function(g){var k=false;try{for(var f=0;f<this.elements.length;f++){if(this.elements[f].key==g){this.elements.splice(f,1);return true}}}catch(j){k=false}return k};this.get=function(g){try{for(var f=0;f<this.elements.length;f++){if(this.elements[f].key==g){return this.elements[f].value}}}catch(j){return null}};this.element=function(e){if(e<0||e>=this.elements.length){return null}return this.elements[e]};this.containsKey=function(g){var k=false;try{for(var f=0;f<this.elements.length;f++){if(this.elements[f].key==g){k=true;break}}}catch(j){k=false}return k};this.containsValue=function(f){var k=false;try{for(var g=0;g<this.elements.length;g++){if(this.elements[g].value==f){k=true;break}}}catch(j){k=false}return k};this.values=function(){var e=new Array();for(var f=0;f<this.elements.length;f++){e.push(this.elements[f].value)}return e};this.keys=function(){var e=new Array();for(var f=0;f<this.elements.length;f++){e.push(this.elements[f].key)}return e}};var b=0;hotjs.Class=function(){b++;this.oid=b};hotjs.Class.prototype={getObjectNumber:function(){return b},addNode:function(e,f){return this},setContainer:function(e){this.container=e;return this},addTo:function(e,f){this.setContainer(e);e.addNode(this,f);return this}};var a=function(){hotjs.base(this);this.views=[];this.runningTime=0};hotjs.inherit(a,hotjs.Class,{addNode:function(e){this.views.push(e);return this},start:function(){for(var e=0;e<this.views.length;e++){this.views[e].start()}return this},resume:function(e){for(var f=0;f<this.views.length;f++){this.views[f].resume(e)}return this},pause:function(){for(var e=0;e<this.views.length;e++){this.views[e].resume(false)}return this}});hotjs.HashMap=c;hotjs.App=a})();hotjs=hotjs||{};(function(){var c={Float:function(g,f){return((Math.random()*(f-g))+g)},Integer:function(g,f){return Math.floor((Math.random()*(f-g))+g)},Color:function(g,f){var j=c.Integer(g,f);var i=c.Integer(g,f);var k=c.Integer(g,f);return("#"+j.toString(16)+i.toString(16)+k.toString(16))}};var a={copy:function(f){return[f[0],f[1]]},vert:function(f){return[f[1],-f[0]]},add:function(g,f){return[g[0]+f[0],g[1]+f[1]]},sub:function(g,f){return[g[0]-f[0],g[1]-f[1]]},mul:function(f,g){return[f[0]*g,f[1]*g]},scale:function(f,g){return[f[0]*g[0],f[1]*g[1]]},scaleDown:function(f,g){return[f[0]/g[0],f[1]/g[1]]},getLength:function(f){return Math.sqrt(f[0]*f[0]+f[1]*f[1])},norm:function(f){var g=1/Math.sqrt(f[0]*f[0]+f[1]*f[1]);return[f[0]*g,f[1]*g]},angle:function(g){var f=Math.acos(g[0]/Math.sqrt(g[0]*g[0]+g[1]*g[1]));if(g[1]<0){f=-f}return f},project:function(s,r){var j=s[0],i=s[1];var f=r[0],w=r[1];var l=Math.atan2(i,j);var k=Math.atan2(w,f);var g=l-k;var t=Math.sqrt(j*j+i*i)*Math.cos(g);var q=t*Math.cos(k);var m=t*Math.sin(k);return[q,m]},inRect:function(f,g){return((f[0]>=g[0])&&(f[0]<g[0]+g[2]))&&((f[1]>=g[1])&&(f[1]<g[1]+g[3]))},inCircle:function(i,g,f){return((i[0]-g[0])*(i[0]-g[0])+(i[1]-g[1])*(i[1]-g[1])<=(f*f))}};var b={create:function(f,t,g){if(g==undefined){g=0}var q=[];for(var l=0;l<f;l++){var s=[];for(var k=0;k<t;k++){s.push(g)}q.push(s)}return q},copy:function(v){var k=[];for(var l=0,f=v.length;l<f;l++){var q=v[l],t=[];for(var g=0,w=q.length;g<w;g++){t[g]=q[g]}k.push(t)}return k},copyDeep:function e(k){if(Array.isArray(k)){var g=[];for(var j=0,f=k.length;j<f;j++){g.push(b.copyDeep(k[j]))}return g}else{return k}},isEqual:function(l,g){if(l.length<1||g.length<1){return false}if(l.length!=g.length){return false}if(l[0].length!=g[0].length){return false}for(var s=0,f=l.length;s<f;s++){var q=l[s],k=g[s];for(var r=0,t=q.length;r<t;r++){if(q[r]!=k[r]){return false}}}return true},add:function(k,g){var x=[];for(var w=0,q=k.length;w<q;w++){var f=[],z=k[w],y=g[w];for(var v=0,l=z.length;v<l;v++){f[v]=z[v]+y[v]}x.push(f)}return x},sub:function(k,g){var x=[];for(var w=0,q=k.length;w<q;w++){var f=[],z=k[w],y=g[w];for(var v=0,l=z.length;v<l;v++){f[v]=z[v]-y[v]}x.push(f)}return x},mul:function(){},setValue:function(f,w){var t=[];for(var q=0,k=f.length;q<k;q++){var x=f[q],r=[];for(var l=0,g=x.length;l<g;l++){r.push(w)}t.push(r)}return t},convert:function(f,k){var v=[];for(var r=0,l=f.length;r<l;r++){var w=f[r],t=[];for(var q=0,g=w.length;q<g;q++){t.push(k(w[q]))}v.push(t)}return v},inverse:function(r){var f=r.length;var t=r[0].length;var k=b.create(t,f);for(var l=0;l<f;l++){var q=r[l];for(var g=0;g<t;g++){k[g][l]=q[g]}}return k},toString:function(k,q,j){if(q==undefined){q=""}if(j==undefined){j="|"}var l=[];for(var g=0,f=k.length;g<f;g++){l.push(k[g].join(q))}return l.join(j)},fromString:function(k,m,j){if(m==undefined){m=""}if(j==undefined){j="|"}var g=[];var l=k.split(j);for(var f=0;f<l.length;f++){g.push(l[f].split(m))}return g},log:function(j){for(var g=0,f=j.length;g<f;g++){console.log(j[g])}}};hotjs.Random=c;hotjs.Vector=a;hotjs.Matrix=b})();(function(){var C={};var B=0;var w=0;function l(){return B}function t(){return w}function z(E,H,F){var D=Math.round(100*H/F);var G=document.getElementById("loading_msg");if(G){G.innerHTML=D+"% ("+H+"/"+F+")"}}function q(D){var E=document.getElementById("loading_msg");if(E){E.innerHTML="error loading: "+D.substring(D.lastIndexOf("/")+1)}}function i(){d=document.getElementById("res_loading_msg_win");if(d){d.setAttribute("style","display:none")}}var e=[i];var f=[z];var m=[q];function a(D){e=[i,D]}function c(D){f=[z,D]}function g(D){m=[q,D]}function v(){var E=window.innerWidth,G=window.innerHeight;var F=100,H=300;var D=(E-F)/2,J=(G-H)/2;var I=document.createElement("div");I.setAttribute("id","res_loading_msg_win");I.setAttribute("style","left:"+D+"px;top:"+J+"px;width:"+F+"px;text-align:center;alpha:0.5;background:silver;border:solid silver 1px;padding:10px;font-family:Verdana,Geneva,sans-serif;font-size:9pt;display:solid;position:absolute;-moz-border-radius:10px;-webkit-border-radius: 10px;-khtml-border-radius: 10px;border-radius: 10px;");I.innerHTML+="<br><img id='loading_img' src='data:image/gif;base64,R0lGODlhNgA3APMAAP///wAAAHh4eBwcHA4ODtjY2FRUVNzc3MTExEhISIqKigAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAANgA3AAAEzBDISau9OOvNu/9gKI5kaZ4lkhBEgqCnws6EApMITb93uOqsRC8EpA1Bxdnx8wMKl51ckXcsGFiGAkamsy0LA9pAe1EFqRbBYCAYXXUGk4DWJhZN4dlAlMSLRW80cSVzM3UgB3ksAwcnamwkB28GjVCWl5iZmpucnZ4cj4eWoRqFLKJHpgSoFIoEe5ausBeyl7UYqqw9uaVrukOkn8LDxMXGx8ibwY6+JLxydCO3JdMg1dJ/Is+E0SPLcs3Jnt/F28XXw+jC5uXh4u89EQAh+QQJCgAAACwAAAAANgA3AAAEzhDISau9OOvNu/9gKI5kaZ5oqhYGQRiFWhaD6w6xLLa2a+iiXg8YEtqIIF7vh/QcarbB4YJIuBKIpuTAM0wtCqNiJBgMBCaE0ZUFCXpoknWdCEFvpfURdCcM8noEIW82cSNzRnWDZoYjamttWhphQmOSHFVXkZecnZ6foKFujJdlZxqELo1AqQSrFH1/TbEZtLM9shetrzK7qKSSpryixMXGx8jJyifCKc1kcMzRIrYl1Xy4J9cfvibdIs/MwMue4cffxtvE6qLoxubk8ScRACH5BAkKAAAALAAAAAA2ADcAAATOEMhJq7046827/2AojmRpnmiqrqwwDAJbCkRNxLI42MSQ6zzfD0Sz4YYfFwyZKxhqhgJJeSQVdraBNFSsVUVPHsEAzJrEtnJNSELXRN2bKcwjw19f0QG7PjA7B2EGfn+FhoeIiYoSCAk1CQiLFQpoChlUQwhuBJEWcXkpjm4JF3w9P5tvFqZsLKkEF58/omiksXiZm52SlGKWkhONj7vAxcbHyMkTmCjMcDygRNAjrCfVaqcm11zTJrIjzt64yojhxd/G28XqwOjG5uTxJhEAIfkECQoAAAAsAAAAADYANwAABM0QyEmrvTjrzbv/YCiOZGmeaKqurDAMAlsKRE3EsjjYxJDrPN8PRLPhhh8XDMk0KY/OF5TIm4qKNWtnZxOWuDUvCNw7kcXJ6gl7Iz1T76Z8Tq/b7/i8qmCoGQoacT8FZ4AXbFopfTwEBhhnQ4w2j0GRkgQYiEOLPI6ZUkgHZwd6EweLBqSlq6ytricICTUJCKwKkgojgiMIlwS1VEYlspcJIZAkvjXHlcnKIZokxJLG0KAlvZfAebeMuUi7FbGz2z/Rq8jozavn7Nev8CsRACH5BAkKAAAALAAAAAA2ADcAAATLEMhJq7046827/2AojmRpnmiqrqwwDAJbCkRNxLI42MSQ6zzfD0Sz4YYfFwzJNCmPzheUyJuKijVrZ2cTlrg1LwjcO5HFyeoJeyM9U++mfE6v2+/4PD6O5F/YWiqAGWdIhRiHP4kWg0ONGH4/kXqUlZaXmJlMBQY1BgVuUicFZ6AhjyOdPAQGQF0mqzauYbCxBFdqJao8rVeiGQgJNQkIFwdnB0MKsQrGqgbJPwi2BMV5wrYJetQ129x62LHaedO21nnLq82VwcPnIhEAIfkECQoAAAAsAAAAADYANwAABMwQyEmrvTjrzbv/YCiOZGmeaKqurDAMAlsKRE3EsjjYxJDrPN8PRLPhhh8XDMk0KY/OF5TIm4qKNWtnZxOWuDUvCNw7kcXJ6gl7Iz1T76Z8Tq/b7/g8Po7kX9haKoAZZ0iFGIc/iRaDQ40Yfj+RepSVlpeYAAgJNQkIlgo8NQqUCKI2nzNSIpynBAkzaiCuNl9BIbQ1tl0hraewbrIfpq6pbqsioaKkFwUGNQYFSJudxhUFZ9KUz6IGlbTfrpXcPN6UB2cHlgfcBuqZKBEAIfkECQoAAAAsAAAAADYANwAABMwQyEmrvTjrzbv/YCiOZGmeaKqurDAMAlsKRE3EsjjYxJDrPN8PRLPhhh8XDMk0KY/OF5TIm4qKNWtnZxOWuDUvCNw7kcXJ6gl7Iz1T76Z8Tq/b7yJEopZA4CsKPDUKfxIIgjZ+P3EWe4gECYtqFo82P2cXlTWXQReOiJE5bFqHj4qiUhmBgoSFho59rrKztLVMBQY1BgWzBWe8UUsiuYIGTpMglSaYIcpfnSHEPMYzyB8HZwdrqSMHxAbath2MsqO0zLLorua05OLvJxEAIfkECQoAAAAsAAAAADYANwAABMwQyEmrvTjrzbv/YCiOZGmeaKqurDAMAlsKRE3EsjjYxJDrPN8PRLPhfohELYHQuGBDgIJXU0Q5CKqtOXsdP0otITHjfTtiW2lnE37StXUwFNaSScXaGZvm4r0jU1RWV1hhTIWJiouMjVcFBjUGBY4WBWw1A5RDT3sTkVQGnGYYaUOYPaVip3MXoDyiP3k3GAeoAwdRnRoHoAa5lcHCw8TFxscduyjKIrOeRKRAbSe3I9Um1yHOJ9sjzCbfyInhwt3E2cPo5dHF5OLvJREAOwAAAAAAAAAAAA=='/>";I.innerHTML+="<br><br><div id='loading_msg'>0%</div>";document.body.appendChild(I)}function j(D,E){v();if(E!=undefined){if(typeof E.ready=="function"){e=[i,E.ready]}if(typeof E.loading=="function"){f=[z,E.loading]}if(typeof E.error=="function"){m=[q,E.error]}}if(D instanceof Array){D.forEach(function(F){A(F)})}else{A(D)}}function s(D){if(D instanceof Array){D.forEach(function(E){if(C.hasOwnProperty(E)){delete C[E]}})}else{if(C.hasOwnProperty(D)){delete C[url]}}}function y(D){if(D.endsWith("ogg")){return(D.indexOf("video")>-1)}else{return(D.endsWith("mp4")||D.endsWith("webm"))}}function b(D){if(D.endsWith("ogg")){return(D.indexOf("video")==-1)}else{return(D.endsWith("mp3")||D.endsWith("wav"))}}function k(D){return D.endsWith(".js")}function A(D){if(D in C){return}else{var H;var J=y(D),E=b(D),M=k(D);if(J){H=new Video()}else{if(E){H=new Audio()}else{if(M){var L=hotjs.getAbsPath(D,document.location.href);var K=document.getElementsByTagName("script");for(var G=0;G<K.length;G++){if(K[G].src==L){return K[G]}}H=document.createElement("script")}else{H=new Image()}}}C[D]=false;B++;var F=function(){C[D]=H;w++;console.log(D+" preloaded ("+w+"/"+B+")");if(D.endsWith(".sprite.js")){var S=hotjs.getFileName(D);if(S in sprite_cache){var R=sprite_cache[S];R.url=D;var N=R.images;for(id in N){var T=N[id];var P=hotjs.getAbsPath(T[0],D);T[2]=P;A(P)}}}else{if(D.endsWith(".pst.js")){var S=hotjs.getFileName(D);if(S in pst_cache){var O=pst_cache[S]["launchers"];for(var Q=0;Q<O.length;Q++){resurl=hotjs.getAbsPath(O[Q].res,D);O[Q].resurl=resurl;A(resurl)}}}}f.forEach(function(U){U(H.src,w,B)});if(r()){e.forEach(function(U){U()})}};var I=function(){m.forEach(function(N){N(H.src)})};if(J||E){H.addEventListener("canplay",F);H.setAttribute("preload","auto")}else{if(M){H.async=true;H.addEventListener("load",F);var K=document.getElementsByTagName("script");K[0].parentNode.insertBefore(H,K[0])}else{H.addEventListener("load",F)}}H.addEventListener("error",I);H.setAttribute("src",D);return H}}function x(G){var I=C[G];if(!I){var F=y(G),E=b(G),D=k(G);if(F){I=new Video();I.setAttribute("src",G);I.load()}else{if(E){I=new Audio();I.setAttribute("src",G);I.load()}else{if(D){I=document.createElement("script");I.async=1;I.setAttribute("src",G);var H=document.getElementsByTagName("script");H[0].parentNode.insertBefore(I,H[0])}else{I=new Image();I.setAttribute("src",G)}}}C[G]=I}return I}function r(){var E=true;for(var D in C){if(C.hasOwnProperty(D)&&!C[D]){E=false}}return E}window.resources={load:j,unload:s,get:x,getTotal:l,getLoaded:t,onReady:a,onLoading:c,onError:g,isReady:r}})();var hotjs=hotjs||{};(function(){var a=hotjs.Vector;var f=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(i){window.setTimeout(i,1000/60)}})();var g=function(){hotjs.base(this);this.canvas=document.createElement("canvas");this.ctx=this.canvas.getContext("2d");this.canvas.width=480;this.canvas.height=320;this.rect=this.canvas.getBoundingClientRect();this.color="black";this.bgcolor="white";this.bgrepeat=false;this.bgimg=undefined;this.bgimgrect=undefined;this.container=undefined;this.scenes=[];this.sceneIndex={};this.curScene=undefined;this.bFps=false;this.dtSum=0;this.frames=0;this.fps=60;this.maxFps=60;this.runningTime=0;this.runningTimeStr="0 : 00 : 00";this.infoPos=[40,40];this.dragItems=new hotjs.HashMap();this.touches=new hotjs.HashMap();this.mouseInView=[0,0,0];this.mouseInNode=[0,0,0];this.touch_accuracy=3;var j=this;var i=this.canvas;this.canvas.addEventListener("click",function(k){j.onClick(k);k.preventDefault()});this.canvas.addEventListener("mousedown",function(k){document.onmousemove=function(l){l=l||window.event;j.onMouseMove(l);k.preventDefault()};document.onmouseup=function(l){document.onmousemove=null;if(i.releaseCapture){i.releaseCapture()}j.onMouseUp(l);k.preventDefault()};if(i.setCapture){i.setCapture()}j.onMouseDown(k);k.preventDefault()});this.canvas.addEventListener("mousemove",function(k){j.onMouseMove(k);k.preventDefault()});this.canvas.addEventListener("touchstart",function(k){j.onTouchStart(k);k.preventDefault()});this.canvas.addEventListener("touchend",function(k){j.onTouchEnd(k);k.preventDefault()});this.canvas.addEventListener("touchcancel",function(k){j.onTouchEnd(k);k.preventDefault()});this.canvas.addEventListener("touchmove",function(k){j.onTouchMove(k);k.preventDefault()})};hotjs.inherit(g,hotjs.Class,{start:function(){var l=this;var m=Date.now();var k=1000/this.maxFps;var i=m+k;function j(){var q=Date.now();if(q>i){if(l.running){var r=(q-m)/1000;l.update(r);l.render()}m=q;i+=k}f(j)}this.running=true;j();return this},setMaxFps:function(i){this.maxFps=Math.max(1,Math.min(i,60));return this},resume:function(i){if(i==undefined){i=true}this.running=i;return this},pause:function(){this.rusume(false);return this},setContainer:function(i){this.container=document.getElementById(i);if(!this.container){this.container=document.body}this.container.appendChild(this.canvas);this.canvas.unselectable="on";this.canvas.onselectstart=function(){return false};this.canvas.style.userSelect=this.canvas.style.MozUserSelect="none";return this},setSize:function(i,j){this.canvas.width=i;this.canvas.height=j;this.rect=this.canvas.getBoundingClientRect();return this},setBgColor:function(i){this.bgcolor=i;return this},setColor:function(i){this.color=i;return this},setBgImage:function(k,i,j){this.bgrepeat=k;this.bgimg=i;if(!j){this.bgimgrect=[0,0,i.width,i.height]}else{this.bgimgrect=[j[0],j[1],j[2],j[3]]}return this},getSize:function(){return[this.canvas.width,this.canvas.height]},width:function(){return this.canvas.width},height:function(){return this.canvas.height},shift:function(i,j){if(!!this.curScene){this.curScene.move(-i,-j)}return this},zoom:function(j,i){if(!i){i=[this.width()/2,this.height()/2]}if(!!this.curScene){var k=this.curScene.posFromContainer(i);this.curScene.zoom(j,k)}return this},addNode:function(i,j){this.scenes.push(i);if(j!=undefined){this.sceneIndex[j]=i}i.setContainer(this);this.curScene=i;return this},switchScene:function(i){if(!!i){if(!!this.curScene){}this.curScene=i}return this},switchSceneById:function(j){var i=this.sceneIndex[j];if(!!i){this.switchScene(i)}return this},pushSceneById:function(i){this.sceneStack.push(this.curScene);this.switchSceneById(i);return this},popScene:function(){var i=this.sceneStack.pop();this.switchScene(i);return this},showFPS:function(i){if(i==undefined){i=(!this.bFps)}this.bFps=i;return this},update:function(q){for(var k=0;k<this.scenes.length;k++){this.scenes[k].update(q)}this.frames++;this.dtSum+=q;if(this.dtSum>1){this.rect=this.canvas.getBoundingClientRect();this.runningTime+=this.dtSum;if(this.bFps){var l=Math.floor(this.runningTime);var j=Math.floor(l/60);l%=60;if(l<10){l="0"+l}h=Math.floor(j/60);j%=60;if(j<10){j="0"+j}this.runningTimeStr=h+" : "+j+" : "+l}this.fps=Math.round(this.frames/this.dtSum);this.dtSum=0;this.frames=0}return this},render:function(){var k=this.ctx;k.save();if(!!this.bgimg){if(this.bgrepeat){k.fillStyle=k.createPattern(this.bgimg,"repeat");k.fillRect(0,0,this.canvas.width,this.canvas.height)}else{k.drawImage(this.bgimg,this.bgimgrect[0],this.bgimgrect[1],this.bgimgrect[2],this.bgimgrect[3],0,0,this.canvas.width,this.canvas.height)}}else{if(!!this.bgcolor){k.fillStyle=this.bgcolor}k.fillRect(0,0,this.canvas.width,this.canvas.height)}for(var j=0;j<this.scenes.length;j++){this.scenes[j].render(k)}this.draw(k);k.restore();return this},setInfoPos:function(i,j){this.infoPos=[i,j];return this},draw:function(k){if(this.bFps){k.save();k.strokeStyle=this.color;k.fillStyle=this.color;k.fillText(this.runningTimeStr,this.infoPos[0],this.infoPos[1]+20);k.fillText(this.fps+" fps: "+this.frames,this.infoPos[0],this.infoPos[1]+40);k.fillText("("+this.canvas.width+" x "+this.canvas.height+")",this.infoPos[0],this.infoPos[1]+60);var j="("+this.rect.width+" x "+this.rect.height+"): ("+this.rect.left+","+this.rect.top+") -> ("+this.rect.right+","+this.rect.bottom+")";k.fillText(j,this.infoPos[0],this.infoPos[1]+80);if(this.curScene&&this.curScene.scale){var i=this.curScene.scale;i=Math.round(i[0]*100)+"% x "+Math.round(i[1]*100)+"%";k.fillText(i,this.infoPos[0],this.infoPos[1]+100)}k.fillText(this.mouseInView[2]+": ("+this.mouseInView[0]+", "+this.mouseInView[1]+")",this.infoPos[0],this.infoPos[1]+120);k.fillText(this.mouseInNode[2]+": ("+this.mouseInNode[0]+", "+this.mouseInNode[1]+")",this.infoPos[0],this.infoPos[1]+140);k.strokeRect(0,0,this.canvas.width,this.canvas.height);k.restore()}},touchFromEvent:function(m){var j=this.canvas;var s=j.ownerDocument||j.document||document;var i=s.documentElement;var k=s.body;var q=i.scrollLeft||k.scrollLeft;var l=i.scrollTop||k.scrollTop;var r=m.identifier;if(m.identifier==undefined){r=0}return{id:r,x:Math.round(m.pageX-this.rect.left-q),y:Math.round(m.pageY-this.rect.top-l)}},click:function(i){var j=this.curScene;if(!!j){if(j.inRange([i.x,i.y])){return j.onClick(i)}}return false},onClick:function(i){return false},onMouseDown:function(k){var i=this.touchFromEvent(k);this.touches.put(i.id,[i.x,i.y]);this.mouseInView=[i.x,i.y,i.id];this.t0=[i.x,i.y];var j=this.curScene;if(!!j){if(j.inRange([i.x,i.y])){if(j.draggable){this.dragItems.put(i.id,j)}return j.onTouchStart(i)}}return false},onMouseUp:function(l){var i=this.touchFromEvent(l);this.touches.remove(i.id);this.mouseInView=[i.x,i.y,i.id];var k=[i.x-this.t0[0],i.y-this.t0[1]];if(hotjs.Vector.getLength(k)<=this.touch_accuracy){this.click(i)}var j=this.dragItems.get(i.id);if(!!j){this.dragItems.remove(i.id);return j.onTouchEnd(i)}var j=this.curScene;if(!!j){if(j.inRange([i.x,i.y])){return j.onTouchEnd(i)}}return false},onMouseMove:function(k){var i=this.touchFromEvent(k);this.mouseInView=[i.x,i.y,i.id];var j=this.dragItems.get(i.id);if(!!j){return j.onTouchMove(i)}var j=this.curScene;if(!!j){return j.onTouchMove(i)}return false},onTouchStart:function(k){this.touch_accuracy=10;for(var j=0;j<k.targetTouches.length;j++){this.onMouseDown(k.targetTouches[j])}},onTouchEnd:function(k){this.touch_accuracy=10;for(var j=0;j<k.changedTouches.length;j++){this.onMouseUp(k.changedTouches[j])}},onTouchMove:function(k){this.touch_accuracy=10;for(var j=0;j<k.targetTouches.length;j++){this.onMouseMove(k.targetTouches[j])}}});var e=0;var c=function(){hotjs.base(this);this.container=undefined;this.name="node_"+(e++);this.subnodes=undefined;this.index={};this.size=[40,40];this.color=undefined;this.bgcolor=undefined;this.img=undefined;this.imgrect=undefined;this.sprite=undefined;this.gridOn=false;this.imgOn=true;this.pos=[0,0];this.velocity=[0,0];this.rotation=undefined;this.scale=undefined;this.alpha=undefined;this.anims=[];this.accel=undefined;this.mass=1600;this.density=1;this.draggable=undefined;this.moveable=undefined;this.zoomable=undefined;this.rotateable=undefined;this.throwable=undefined;this.gesture=[0,0];this.dragging=false};hotjs.inherit(c,hotjs.Class,{setName:function(i){this.name=i;return this},getName:function(){return this.name},setPos:function(i,j){this.pos=[i,j];return this},setSize:function(i,j){this.size=[i,j];return this},getSize:function(){return this.size},posFromContainer:function(j){var i=j[0]-this.pos[0],k=j[1]-this.pos[1];if(!!this.scale){i/=this.scale[0];k/=this.scale[1]}return[Math.floor(i),Math.floor(k)]},posToContainer:function(j){var i=j[0],k=j[1];if(!!this.scale){i*=this.scale[0];k*=this.scale[1]}return[Math.floor(i+this.pos[0]),Math.floor(k+this.pos[1])]},inRange:function(k){var j=this.posFromContainer(k);var i=(j[0]>=0)&&(j[0]<this.size[0])&&(j[1]>=0)&&(j[1]<this.size[1]);return i},setDraggable:function(i,j){this.draggable=i||j;this.draggableX=i;this.draggableY=(j==undefined)?i:j;if(this.draggable){if(this.touches0==undefined){this.touches0=new hotjs.HashMap()}if(this.touches==undefined){this.touches=new hotjs.HashMap()}}return this},setMoveable:function(i,j){this.setDraggable(i,j);this.moveable=i||j;return this},setThrowable:function(i,j){this.setMoveable(i,j);this.throwable=i||j;this.throwableX=i;this.throwableY=(j==undefined)?i:j;return this},setZoomable:function(i){this.zoomable=i;if(i){if(this.touches0==undefined){this.touches0=new hotjs.HashMap()}if(this.touches==undefined){this.touches=new hotjs.HashMap()}if(this.scale==undefined){this.scale=[1,1]}}return this},setRotateable:function(i){if(i){if(this.touches0==undefined){this.touches0=new hotjs.HashMap()}if(this.touches==undefined){this.touches=new hotjs.HashMap()}if(this.rotation==undefined){this.rotation=0}}this.rotateable=i;return this},onClick:function(k){var q=this.posFromContainer([k.x,k.y]);var l={id:k.id,x:q[0],y:q[1]};this.container.mouseInNode=[l.x,l.y,l.id];if(!!this.subnodes){for(var j=this.subnodes.length-1;j>=0;j--){var m=this.subnodes[j];if(m.inRange(q)){return m.onClick(l)}}}},onTouchStart:function(k){if(!!this.touches0){var m={id:k.id,x:k.x,y:k.y,px:this.pos[0],py:this.pos[1]};if(this.zoomable){m.sx=this.scale[0];m.sy=this.scale[1]}if(this.rotateable){m.r=this.rotation}this.touches0.put(k.id,m);if(this.touches0.size()==1){this.id0=k.id}}this.gestureTime=Date.now();this.gesturePos=[k.x,k.y];this.gesture=[0,0];var r=this.posFromContainer([k.x,k.y]);var l={id:k.id,x:r[0],y:r[1]};this.container.mouseInNode=[l.x,l.y,l.id];if(!!this.subnodes){for(var j=this.subnodes.length-1;j>=0;j--){var q=this.subnodes[j];if((!!q.draggable)&&q.inRange(r)){this.dragItems.put(l.id,q);return q.onTouchStart(l)}}}if(!!this.draggable){this.dragging=true;this.setVelocity(0,0);return true}return false},fixPos:function(){},handleDragZoomRotate:function(A){if(!this.touches){return false}if(!this.touches0){return false}if(this.draggable){if(this.touches.size()==1){var s=this.touches0.get(this.id0);var m=this.touches.get(this.id0);if(this.draggableX){this.pos[0]=(m.x-s.x+s.px)}if(this.draggableY){this.pos[1]=(m.y-s.y+s.py)}this.fixPos()}}if(this.zoomable){if(this.touches.size()==2){var i=this.touches.keys();var w=this.touches0.get(i[0]);var y=this.touches0.get(i[1]);var k=a.getLength(a.sub([w.x,w.y],[y.x,y.y]));var r=this.touches.get(i[0]);var x=this.touches.get(i[1]);var j=a.getLength(a.sub([r.x,r.y],[x.x,x.y]));var s=this.touches0.get(this.id0);this.scale=[s.sx*j/k,s.sy*j/k];var v=[(w.x+y.x)/2,(w.y+y.y)/2];center_view=a.add([s.px,s.py],a.scale(v,[s.sx,s.sy]));this.pos=a.sub(center_view,a.scale(v,this.scale));var q=[(r.x+x.x)/2,(r.y+x.y)/2];var l=a.sub(q,v);this.pos=a.add(this.pos,l);this.fixPos()}}if(this.rotateable){}if(!!this.throwable){var z=this.getGesture();if(this.throwableX){this.velocity[0]=z[0]}if(this.throwableY){this.velocity[1]=z[1]}}},updateGesture:function(j){var i=Date.now();var k=(i-this.gestureTime)/1000;if(k>0){this.gesture=[(j.x-this.gesturePos[0])/k,(j.y-this.gesturePos[1])/k];if(k>0.3){this.gestureTime=i;this.gesturePos=[j.x,j.y]}}},getGesture:function(){return this.gesture},onTouchMove:function(k){if(!!this.touches){var m={id:k.id,x:k.x,y:k.y,px:this.pos[0],py:this.pos[1]};if(this.zoomable){m.sx=this.scale[0];m.sy=this.scale[1]}if(this.rotateable){m.r=this.rotation}this.touches.put(k.id,m)}this.updateGesture(k);if(!!this.dragging){this.handleDragZoomRotate(k);return true}var r=this.posFromContainer([k.x,k.y]);var l={id:k.id,x:r[0],y:r[1]};this.container.mouseInNode=[l.x,l.y,l.id];if(!!this.dragItems){var q=this.dragItems.get(k.id);if(!!q){return q.onTouchMove(l)}}if(!!this.subnodes){for(var j=this.subnodes.length-1;j>=0;j--){var q=this.subnodes[j];if(q.inRange(r)){return q.onTouchMove(l)}}}return false},onTouchEnd:function(i){if(!!this.touches){var l={id:i.id,x:i.x,y:i.y,px:this.pos[0],py:this.pos[1]};if(this.zoomable){l.sx=this.scale[0];l.sy=this.scale[1]}if(this.rotateable){l.r=this.rotation}this.touches.put(i.id,l)}this.updateGesture(i);if(this.dragging){this.dragging=false;if(!!this.moveable){this.handleDragZoomRotate(i)}else{var k=this.touches0.get(this.id0);this.pos=[k.px,k.py]}if(!!this.touches){this.touches.remove(i.id)}if(!!this.touches0){this.touches0.remove(i.id)}return true}var q=this.posFromContainer([i.x,i.y]);var j={id:i.id,x:q[0],y:q[1]};this.container.mouseInNode=[j.x,j.y,j.id];if(!!this.dragItems){var m=this.dragItems.get(i.id);if(!!m){this.dragItems.remove(j.id);return m.onTouchEnd(j)}}if(!!this.touches){this.touches.remove(i.id)}if(!!this.touches0){this.touches0.remove(i.id)}return false},width:function(){return this.size[0]},height:function(){return this.size[1]},setRotation:function(i){this.rotation=i;return this},setScale:function(j,i){this.scale=[j,i];return this},setVelocity:function(j,i){this.velocity=[j,i];return this},setMass:function(i){this.mass=i;return this},setDensity:function(i){this.density=i;this.mass=this.size[0]*this.size[1]*i;return this},setAccel:function(j,i){if(!this.velocity){this.velocity=[0,0]}this.accel=[j,i];return this},setColor:function(i){this.color=i;return this},setBgColor:function(i){this.bgcolor=i;return this},setAlpha:function(i){this.alpha=i;return this},showGrid:function(i){if(i==undefined){i=(!this.gridOn)}this.gridOn=i;return this},showImg:function(i){if(i==undefined){i=(!this.imgOn)}this.imgOn=i;return this},setImage:function(i,j){this.img=i;if(!j){this.imgrect=[0,0,i.width,i.height];if(!this.size){this.size=[i.width,i.height]}}else{this.imgrect=[j[0],j[1],j[2],j[3]];if(!this.size){this.size=[rect[2],rect[3]]}}return this},setSprite:function(i){this.sprite=i;return this},addNode:function(j,i){if(this.subnodes==undefined){this.subnodes=[]}if(this.index==undefined){this.index={}}if(this.dragItems==undefined){this.dragItems=new hotjs.HashMap()}if(this.touches==undefined){this.touches=new hotjs.HashMap()}j.setContainer(this);this.subnodes.push(j);if(typeof i=="string"){this.index[i]=j}return this},removeNode:function(k){if(!!this.subnodes){var j=this.subnodes.indexOf(k);if(j>=0){this.subnodes.splice(j,1);k.setContainer(undefined)}}return this},removeAll:function(){if(!!this.subnodes){while(this.subnodes.length>0){n=this.subnodes.pop();if("removeAll" in n){n.removeAll()}}for(id in this.index){delete this.index[id]}}return this},update:function(k){if(!!this.sprite){this.sprite.update(k)}if(!!this.subnodes){for(var j=0;j<this.subnodes.length;j++){this.subnodes[j].update(k)}}if(!!this.dragging){return this}if(this.velocity!==undefined){this.pos[0]+=this.velocity[0]*k;this.pos[1]+=this.velocity[1]*k}if(this.accel!==undefined){this.velocity[0]+=this.accel[0]*k;this.velocity[1]+=this.accel[1]*k}if(this.anims.length>0){for(var j=0;j<this.anims.length;j++){this.anims[j].update(k)}}return this},addAnim:function(i){this.anims.push(i);return this},removeAnim:function(i){this.anims.splice(this.anims.indexOf(i),1);return this},render:function(k){k.save();if(!this.rotation){k.translate(this.pos[0],this.pos[1])}else{k.translate(this.pos[0]+this.size[0]/2,this.pos[1]+this.size[1]/2);k.rotate(this.rotation*Math.PI/180);k.translate(-this.size[0]/2,-this.size[1]/2)}if(!!this.scale){k.scale(this.scale[0],this.scale[1])}if(!!this.alpha){k.globalAlpha=this.alpha}this.draw(k);if(!!this.subnodes){for(var j=0;j<this.subnodes.length;j++){this.subnodes[j].render(k)}}k.restore();return this},draw:function(i){i.save();if(this.imgOn){if(!!this.sprite){this.sprite.render(i,this.size[0],this.size[1])}else{if(!!this.img){if(!!this.imgrect){i.drawImage(this.img,this.imgrect[0],this.imgrect[1],this.imgrect[2],this.imgrect[3],0,0,this.size[0],this.size[1])}else{i.drawImage(this.img,0,0,this.size[0],this.size[1])}}}}if(this.gridOn){i.strokeRect(0,0,this.size[0],this.size[1])}i.restore();return this}});var b=function(){hotjs.base(this);this.bgrepeat=false;this.bgimg=undefined;this.bgimgrect=undefined;this.area=undefined;this.arearepeat=false;this.areaimg=undefined;this.areaimgrect=undefined;this.scale=[1,1]};hotjs.inherit(b,c,{setView:function(i){this.setContainer(i);this.zoom();this.setDraggable(true);this.setMoveable(true);return this},setBgImage:function(k,i,j){this.bgrepeat=k;this.bgimg=i;if(!j){this.bgimgrect=[0,0,i.width,i.height]}else{this.bgimgrect=[j[0],j[1],j[2],j[3]]}return this},setAreaImage:function(k,i,j){this.arearepeat=k;this.areaimg=i;if(!j){this.areaimgrect=[0,0,i.width,i.height]}else{this.areaimgrect=[j[0],j[1],j[2],j[3]]}return this},setArea:function(i,l,j,k){this.area={l:i,t:l,w:j,h:k,r:(i+j),b:(l+k)};return this},getArea:function(){if(!this.area){return{l:0,t:0,w:this.size[0],h:this.size[1],r:this.size[0],b:this.size[1]}}return this.area},onTouchMove:function(j){var i=b.supClass.onTouchMove.call(this,j);return i},onTouchEnd:function(j){var i=b.supClass.onTouchEnd.call(this,j);this.fixPos();return i},fixPos:function(){var i=hotjs.Vector;var k=this.container.width(),m=this.container.height();var s=k/this.size[0],r=m/this.size[1];var l=Math.min(s,r);if(this.scale[0]<l||this.scale[1]<l){this.scale[0]=l;this.scale[1]=l}if(this.pos[0]>0){this.pos[0]=0}if(this.pos[1]>0){this.pos[1]=0}var q=(!this.scale)?i.add(this.size,this.pos):i.add(i.scale(this.size,this.scale),this.pos);var j=i.sub(this.container.getSize(),q);if(j[0]>0){this.pos[0]+=j[0]}if(j[1]>0){this.pos[1]+=j[1]}return this},move:function(i,j){this.pos[0]+=i;this.pos[1]+=j;this.fixPos();return this},zoom:function(q,m){var k=this.container.getSize();var i=[k[0]/this.size[0],k[1]/this.size[1]];var l=Math.max(i[0],i[1]);if(q=="none"){this.scale=[1,1];this.pos=[(k[0]-this.size[0])/2,(k[1]-this.size[1])/2]}else{if(q=="stretch"){this.scale=i;this.pos=[0,0]}else{if(q>0){if(!this.scale){this.scale=[1,1]}var j=[l/this.scale[0],l/this.scale[1]];q=Math.max(j[0],Math.max(j[1],q));this.pos=[this.pos[0]-m[0]*this.scale[0]*(q-1),this.pos[1]-m[1]*this.scale[1]*(q-1)];this.scale=a.mul(this.scale,q);if(this.scale[0]<l||this.scale[1]<l){this.scale=[l,l]}}else{this.scale=[l,l];this.pos=[(k[0]-this.size[0]*l)/2,(k[1]-this.size[1]*l)/2]}}}this.fixPos();return this},play:function(){this.playing=true;return this},stop:function(){this.playing=false;return this},draw:function(q){q.save();var k=this.getArea();if(this.imgOn){if(!!this.bgimg){if(this.bgrepeat){q.fillStyle=q.createPattern(this.bgimg,"repeat");q.fillRect(0,0,this.size[0],this.size[1])}else{q.drawImage(this.bgimg,this.bgimgrect[0],this.bgimgrect[1],this.bgimgrect[2],this.bgimgrect[3],0,0,this.size[0],this.size[1])}}else{if(!!this.bgcolor){q.fillStyle=this.bgcolor;q.fillRect(0,0,this.size[0],this.size[1])}}if(!!this.areaimg){if(this.arearepeat){q.fillStyle=q.createPattern(this.areaimg,"repeat");q.fillRect(k.l,k.t,k.w,k.h)}else{q.drawImage(this.areaimg,this.areaimgrect[0],this.areaimgrect[1],this.areaimgrect[2],this.areaimgrect[3],k.l,k.t,k.w,k.h)}}}if(this.gridOn){q.strokeStyle=this.color;q.lineWidth=0.5;var l=40,j=40;q.beginPath();for(var i=0;i<=this.size[0];i+=l){q.moveTo(i,0);q.lineTo(i,this.size[1])}for(var m=0;m<=this.size[1];m+=j){q.moveTo(0,m);q.lineTo(this.size[0],m)}q.stroke();q.lineWidth=1;q.beginPath();q.arc((k.l+k.r)/2,(k.t+k.b)/2,10,0,Math.PI*2);q.arc(this.size[0]/2,this.size[1]/2,20,0,Math.PI*2);q.stroke();q.beginPath();q.strokeRect(k.l,k.t,k.w,k.h);q.strokeRect(0,0,this.size[0],this.size[1]);q.stroke()}q.restore();return this},addItem:function(){}});hotjs.View=g;hotjs.Node=c;hotjs.Scene=b})();var hotjs=hotjs||{};(function(){function c(i,q,j,l,m,g,k){this.pos=q;this.size=j;this.speed=typeof l==="number"?l:0;this.frames=m;this._index=0;this.url=i;this.dir=g||"horizontal";this.once=k}c.prototype={update:function(g){this._index+=this.speed*g},render:function(s,q,j){var g;if(this.speed>0){var l=this.frames.length;var r=Math.floor(this._index);g=this.frames[r%l];if(this.once&&r>=l){this.done=true;return}}else{g=0}var m=this.pos[0];var k=this.pos[1];if(this.dir=="vertical"){k+=g*this.size[1]}else{m+=g*this.size[0]}if(!q){q=this.size[0]}if(!j){j=this.size[1]}var i=resources.get(this.url);s.drawImage(i,m,k,this.size[0],this.size[1],0,0,q,j)}};var f=function(i,g){hotjs.base(this);this.sheet=sprite_cache[hotjs.getFileName(i)];this.anim=(this.sheet.anims)[g];this.index=0;this.counter=0};hotjs.inherit(f,hotjs.Class,{update:function(g){var i=this.anim[this.index];this.counter++;if(this.counter>=i[1]){this.counter=0;this.index++;if(this.index>=this.anim.length){this.index=0}}},render:function(L,t,G){L.save();L.translate(t*0.5,G);var M=this.sheet.modules;var v=this.sheet.images;var z=this.sheet.frames;var I=this.anim[this.index];var K=I[0],l=I[2],j=I[3],q=I[4];var k=z[K];L.translate(l,j);switch(q){case 0:L.scale(1,1);break;case 2:L.scale(-1,1);break;case 3:L.scale(1,-1);break;case 4:L.scale(-1,-1);break}for(var F=0;F<k.length;F++){var E=k[F];var N=E[0],C=E[1],B=E[2],J=E[3];var O=M[N];if(O[0]=="MD_IMAGE"){var A=O[1],s=O[2],r=O[3],t=O[4],G=O[5];var P=v[A];var g=P[2],D=P[1];var H=resources.get(g);L.save();L.translate(C+t/2,B+G/2);switch(J){case 0:L.scale(1.01,1.01);break;case 2:L.scale(-1.01,1.01);break;case 3:L.scale(1.01,-1.01);break;case 4:L.scale(-1.01,-1.01);break}L.drawImage(H,s,r,t,G,-t/2,-G/2,t,G);L.restore()}}L.restore()}});var b=function(g){hotjs.base(this);this.par=g;this.frame=0;this.life=0;this.spin=0;this.spin_delta=0};hotjs.inherit(b,hotjs.Node,{init:function(){var g=hotjs.Random.Integer;var q=hotjs.Random.Float;var r=this.par;var w=r.mode.v;if(r.res.endsWith(".png")){this.setImage(resources.get(r.resurl))}else{if(r.res.endsWith(".sprite.js")){this.setSprite(new f(r.resurl,"xxx"))}else{return this}}this.life=g(r.lifeMin,r.lifeMax);this.pos=[r.x,r.y];switch(r.mode.id){case 0:break;case 31:this.pos[0]+=q(w[0],w[2]);this.pos[1]+=q(w[1],w[3]);break;case 32:var k=q(w[1],w[0]);var j=q(w[2],w[3]);this.pos[0]+=k*Math.cos(j*Math.PI/180);this.pos[1]+=k*Math.sin(j*Math.PI/180);break}var t=r.filters;for(var l=0;l<t.length;l++){var m=t[l];var w=m.v;switch(m.type){case"rotate":if(w[1]>0){this.rotation=q(0,1)*360}else{this.rotation=w[0]}this.spin=w[2];this.spin_delta=(w[3]-w[2])/this.life;break;case"scale":var x=q(w[0],w[1]);this.scale=[x,x];break;case"move":break;case"color":break;case"h3g":break}}return this},update:function(g){b.supClass.update.call(this,g);this.frame++;this.rotation+=this.spin;this.spin+=this.spin_delta}});var e=function(g){hotjs.base(this);this.par=g;this.par.maxPtsCount=Math.min(this.par.maxPtsCount,16);this.subnodes=[];this.frame=0};hotjs.inherit(e,hotjs.Node,{init:function(){},destroy:function(){this.subnodes.length=0},update:function(l){var g=hotjs.Random.Integer;var k=this.par;var q=this.subnodes;for(var j=q.length-1;j>=0;j--){var m=q[j];if(m.frame<m.life){m.update(l)}else{q.splice(j,1);delete m}}if(this.frame>=k.delay&&this.frame<k.life){var r=g(k.createMin,k.createMax);for(var j=0;j<r;j++){if(q.length>=k.maxPtsCount){break}var m=new b(k).init();this.addNode(m)}}this.frame++;if(this.frame>=25){this.frame=0}}});var a=function(g){hotjs.base(this);var l=pst_cache[hotjs.getFileName(g)];var k=l.launchers;for(var j=0;j<k.length;j++){this.addNode(new e(k[j]))}};hotjs.inherit(a,hotjs.Node,{});hotjs.Sprite=c;hotjs.Animat=f;hotjs.Particle=b;hotjs.ParticleSet=e;hotjs.ParticleSystem=a})();hotjs.Anim=hotjs.Anim||{};(function(){var f=function(r,s){hotjs.base(this);this.who=r;this.param={loop:false,duration:1};for(var q in s){this.param[q]=s[q]}this.dtSum=0};hotjs.inherit(f,hotjs.Class,{init:function(){},step:function(q){},restore:function(){},play:function(){this.init();this.who.addAnim(this);return this},update:function(s){this.dtSum+=s;var t=(this.dtSum>=this.param.duration)&&(!this.loop);var q=this.step(s);var r=this.param.step;if(typeof r=="function"){r(this.who,s)}if(t||q){this.who.removeAnim(this);var r=this.param.done;if(typeof r=="function"){r(this.who)}}}});var b=function(q,r){hotjs.base(this,q,r)};hotjs.inherit(b,f,{init:function(){var q=this.param;this.from=[this.who.pos[0],this.who.pos[1]];this.to=[q.to[0],q.to[1]]},step:function(q){this.who.pos=[this.from[0]+(this.to[0]-this.from[0])*this.dtSum/this.param.duration,this.from[1]+(this.to[1]-this.from[1])*this.dtSum/this.param.duration];if(this.dtSum>=this.param.duration){this.who.pos=this.to}return false},restore:function(q){this.who.pos=this.from}});var k=function(q,r){hotjs.base(this,q,r)};hotjs.inherit(k,f,{init:function(){var q=this.param;this.from=[this.who.pos[0],this.who.pos[1]];this.to=[q.to[0],q.to[1]]},step:function(r){var q=Math.pow(this.dtSum/this.param.duration,2);this.who.pos=[this.from[0]+(this.to[0]-this.from[0])*q,this.from[1]+(this.to[1]-this.from[1])*q];if(this.dtSum>=this.param.duration){this.who.pos=this.to}return false},restore:function(q){this.who.pos=this.from}});var g=function(q,r){hotjs.base(this,q,r)};hotjs.inherit(g,f,{init:function(){if(!this.who.velocity){this.who.rotation=[0,0]}this.from=this.who.velocity},step:function(r){var q=Math.cos((this.dtSum/this.param.duration)*(Math.PI/180));this.who.velocity=[this.from[0]*q,this.from[1]*q];if(this.dtSum>=this.param.duration){this.who.velocity=[0,0]}},restore:function(){this.who.velocity=this.from}});var c=function(q,r){hotjs.base(this,q,r)};hotjs.inherit(c,f,{init:function(){if(!this.who.rotation){this.who.rotation=0}this.from=this.who.rotation;this.inc=this.param.spin},step:function(q){this.who.rotation+=this.inc*q},restore:function(){this.who.rotation=this.from}});var i=function(q,r){hotjs.base(this,q,r)};hotjs.inherit(i,f,{init:function(){this.from=this.who.scale;this.to=param.to},step:function(q){this.who.scale=[this.from[0]+(this.to[0]-this.from[0])*this.dtSum/this.param.duration,this.from[1]+(this.to[1]-this.from[1])*this.dtSum/this.param.duration];if(this.dtSum>=this.param.duration){this.who.scale=this.to}},restore:function(){this.who.scale=this.from}});var a=function(q,r){hotjs.base(this,q,r)};hotjs.inherit(a,f,{init:function(){var q=this.param;this.from=this.who.scale;this.mid=(q.range[1]+q.range[0])/2;this.delta=(q.range[1]-q.range[0])/2},step:function(r){var q=this.mid+this.delta*Math.sin(this.dtSum/this.param.freq*Math.PI);this.who.scale=[q,q];return false},restore:function(){this.who.scale=this.from}});var j=function(q,r){hotjs.base(this,q,r)};hotjs.inherit(j,f,{init:function(){this.from=this.who.alpha;this.to=this.param.to},step:function(q){this.who.alpha=this.from+(this.to-this.from)*this.dtSum/this.param.duration;if(this.dtSum>=this.param.duration){this.who.alpha=this.to}},restore:function(){this.who.alpha=this.from}});var l=function(q,r){hotjs.base(this,q,r)};hotjs.inherit(l,f,{init:function(){var q=this.param;this.from=this.who.alpha;this.mid=(q.range[0]+q.range[1])/2;this.delta=(q.range[1]-q.range[0])/2},step:function(q){this.who.alpha=this.mid+this.delta*Math.sin(this.dtSum/this.param.freq*Math.PI);return false},restore:function(){this.who.alpha=this.from}});var e=function(s,r,t){var q=hotjs.Anim[r];if(typeof q!="function"){console.log(q+" not exists, using default.");q=f}return new q(s,t)};var m=function(r,q){hotjs.Anim[r]=q;return this};hotjs.Anim={register:m,create:e,MoveTo:b,StickTo:k,SlowDown:g,RotateBy:c,ScaleTo:i,ScaleLoop:a,FadeTo:j,FadeLoop:l}})();hotjs=hotjs||{};hotjs.Physics=hotjs.Physics||{};(function(){var e={g:9.8,RESTITUTION_V:0.8,RESTITUTION_H:0.95,AIR_RESISTANCE:0.2,AIR_DENSITY:0.01293,HYDROGEN_DENSITY:0.0008948,WOOD_DENSITY:0.5,WATER_DENSITY:1,IRON_DENSITY:7.8,METER:100};var f={velocityAfterCollision:function(i,k,g,j){return((i-g)*k+2*g*j)/(i+g)},airResistance:function(g,i,j){return e.AIR_RESISTANCE*e.AIR_DENSITY*g*i*j*j},airFlotage:function(g,i){return(g*g*i*e.AIR_FLOTAGE)}};var b=function(){hotjs.base(this);this.restitution=0.95};hotjs.inherit(b,hotjs.Node,{setRestitution:function(g){g=Math.min(1,Math.max(0,g));this.restitution=g;return this},getRestitution:function(){return this.restitution},collide:function(g){return this}});var c=function(){hotjs.base(this)};hotjs.inherit(c,b,{collide:function(I){var i=hotjs.Vector;var y=f.velocityAfterCollision;var H=this.size[0]/2,s=this.size[1]/2;var G=I.size[0]/2,q=I.size[1]/2;var B=[this.pos[0]+H,this.pos[1]+s];var A=[I.pos[0]+G,I.pos[1]+q];var F=(H+s)/2;var E=(G+q)/2;var m=i.sub(B,A);var t=this.getRestitution()*I.getRestitution();var r=Math.sqrt(m[0]*m[0]+m[1]*m[1]);if(r>F+E){return false}if(r<F+E){var z=1-r/(F+E);var g=i.mul(m,z);this.pos=i.add(this.pos,g);I.pos=i.sub(I.pos,g)}var J=[m[1],-m[0]];var k=i.project(this.velocity,m);var l=i.project(this.velocity,J);var j=i.project(I.velocity,m);var x=i.project(I.velocity,J);var w=y(this.mass,k[0],I.mass,j[0])*t;var v=y(this.mass,k[1],I.mass,j[1])*t;var D=y(I.mass,j[0],this.mass,k[0])*t;var C=y(I.mass,j[1],this.mass,k[1])*t;this.velocity=i.add(l,[w,v]);I.velocity=i.add(x,[D,C]);return true}});var a=function(){hotjs.base(this);this.restitution=0.6;this.gravity=e.g;this.resistance=1/2;this.meter=200};hotjs.inherit(a,hotjs.Scene,{setRestitution:function(g){g=Math.min(1,Math.max(0,g));this.restitution=g;return this},getRestitution:function(){return this.restitution},setMeter:function(g){this.meter=g;return this},setGravity:function(g){this.gravity=g*e.g;return this},getGravity:function(){return this.gravity},setResistance:function(g){this.resistance=g;return this},getResistance:function(){return this.resistance},checkBorderCollision:function(l){var x=this.getArea();for(var m=this.subnodes.length-1;m>=0;m--){var v=this.subnodes[m];var z=v.pos[0],w=v.pos[1];var k=v.size[0],j=v.size[1];var t=v.velocity[0],r=v.velocity[1];var y=((z<=x.l)&&(t<=0))||((z+k>=x.r)&&(t>=0));var s=((w<=x.t)&&(r<=0))||((w+j>=x.b)&&(r>=0));var g=t*(-this.resistance);var A=r*(-this.resistance);var q=this.restitution*v.getRestitution();if(y){t*=(-q);r*=(0.9+q*0.1)}if(s){r*=(-q);t*=(0.9+q*0.1)}else{A+=(1-e.AIR_DENSITY/v.density)*(this.gravity*this.meter)}v.velocity=[t,r];v.accel=[g,A]}return this},validatePos:function(){var j=this.getArea();for(var k=this.subnodes.length-1;k>=0;k--){var g=this.subnodes[k];px=Math.max(j.l,Math.min(j.r-g.size[0],g.pos[0]));py=Math.max(j.t,Math.min(j.b-g.size[1],g.pos[1]));g.pos=[Math.round(px),Math.round(py)]}return this},update:function(q){if(!!this.subnodes){for(var m=this.subnodes.length-1;m>=0;m--){var g=this.subnodes[m];g.update(q)}for(var m=this.subnodes.length-1;m>=1;m--){var g=this.subnodes[m];for(var l=m-1;l>=0;l--){var k=this.subnodes[l];g.collide(k)}}this.checkBorderCollision(q);this.validatePos()}return this}});hotjs.Physics.Constant=e;hotjs.Physics.Formula=f;hotjs.Physics.Node=b;hotjs.Physics.Scene=a;hotjs.Physics.Ball=c})();hotjs=hotjs||{};hotjs.Social=hotjs.Social||{};(function(){var y=function(){this.settings={url:"http://msghub.hotjs.net/api",cache:false,data:{},processData:true,type:"GET",async:false,timeout:10000,dataType:"html",crossDomain:false,context:document.body,statusCode:{403:function(){console.log("access denied.")},404:function(){console.log("url not found.")},405:function(){console.log("method not allowed.")},500:function(){console.log("server error")}}};this.msgMax=100;this.msgList=[];this.urls={}};y.prototype={config:function(O){if(O.msgMax!=undefined){this.msgMax=O.msgMax;delete O.msgMax}for(var N in O){this.settings[N]=O[N]}},configAPI:function(O){if(typeof O=="string"){this.urls._default_=O}else{if(typeof O=="object"){for(var N in O){this.urls[N]=O[N]}}}this.settings.url=this.urls._default_;return true},loadAPI:function(O,R,N){var U=this.requestMsg({module:R,version:N},O,{type:"GET"});if(!U){return false}if(!Array.isArray(U.list)){return false}var T=U.base;if(T.indexOf("://")<0){T=O.substring(0,O.lastIndexOf("/")+1)+T}for(var Q=0;Q<U.list.length;Q++){var S=U.list[Q];var P=(S.url.indexOf("://")>-1)?S.url:(T+S.url);P=P.replace("/./","/");this.urls[S.api]=P}return true},requestMsg:function(S,O,N){var T={};for(var P in this.settings){T[P]=this.settings[P]}if(!!N){for(var P in N){T[P]=N[P]}}if(!!S){T.data=S}if(!!O){T.url=O}T.async=false;var Q=this;var R=false;$.ajax(T).done(function(V,W,U){console.log(V);V=JSON.parse(V);R=V}).fail(function(U,W,V){Q.onMsgFail(U,W,V)}).complete(function(V,W,U){Q.onMsgComplete(V,W,U)});return R},postMsg:function(R,O,N){var S={};for(var P in this.settings){S[P]=this.settings[P]}if(!!N){for(var P in N){S[P]=N[P]}}if(!!R){S.data=R}if(!!O){S.url=O}S.async=true;var Q=this;$.ajax(S).done(function(U,V,T){console.log(U);U=JSON.parse(U);Q.onMsgComing(U,V,T)}).fail(function(T,V,U){Q.onMsgFail(T,V,U)}).complete(function(U,V,T){Q.onMsgComplete(U,V,T)});return true},onMsgFail:function(N,P,O){console.log("ajax fail");console.log(N,P,O)},onMsgComplete:function(O,P,N){},onMsgComing:function(P,Q,O){if(Array.isArray(P)){for(var N=0;N<P.length;N++){this.onMsgParse(P[N])}}else{this.onMsgParse(P)}},onMsgParse:function(N){},callAPI:function(O,Q){var N=this.urls[O];if(!N){N=this.urls._default_}var P=this.requestMsg({api:O,param:JSON.stringify(Q)},N);if(typeof P=="object"){return P}return false},hello:function t(){var N=this.callAPI(arguments.callee.name,{name:"hotjs"});return(!!N)?N.name:false}};var g=function(){hotjs.base(this);this.username="";this.password="";this.app="hotjs";this.version=hotjs.version;this.session="";this.profile={};this.status={};this.tag=[];this.friends=[];this.blocks=[];this.hb_interval=5000};hotjs.inherit(g,y,{registerAccount:function v(N,Q,O,P,S){var R=this.callAPI(arguments.callee.name,{username:N,password:Q,fullname:O,email:P,cellphone:S});return(!!R)?R.done:false},deleteAccount:function F(){var N=this.callAPI(arguments.callee.name,{username:u,password:p});return(!!N)?N.done:false},login:function C(O,Q,S,N,T){var R=this.callAPI(arguments.callee.name,{username:O,password:Q,app:S,version:N});if((!!R)&&R.done){this.session=R.sid;this.username=O;this.password=Q;this.app=S;this.version=N;if(!!T){this.hb_interval=T}var P="u"+this.session;window[P]=this;this.heartbeat();return true}return false},heartbeat:function J(){if(!!this.session){var N=arguments.callee.name;var Q={sid:this.session,test1:[2,3,"str"],test2:{x:1,y:2}};this.postMsg({api:N,param:JSON.stringify(Q)},this.urls[N]);var P="u"+this.session;var O="window."+P+".heartbeat()";this.hb_timer=window.setTimeout(O,this.hb_interval)}return true},logout:function L(){if(!!this.hb_timer){clearTimeout(this.hb_tiemr);var N="u"+this.session;delete window[N]}var O=this.callAPI(arguments.callee.name,{sid:this.session});this.session="";return(!!O)?O.done:false},changePassword:function I(N,O,P){var Q=this.callAPI(arguments.callee.name,{username:N,oldpwd:O,newpwd:P});return(!!Q)?Q.done:false},updateProfile:function s(N){var O=this.callAPI(arguments.callee.name,{sid:this.session,profile:N});return(!!O)?O.done:false},getProfile:function M(){var N=this.callAPI(arguments.callee.name,{sid:this.session});return((!!N)&&N.done)?N.profile:false},queryProfile:function D(N){var O=this.callAPI(arguments.callee.name,{sid:this.session,user:N});return((!!O)&&O.done)?O.profile:false},listFriend:function j(){var O=this.callAPI(arguments.callee.name,{sid:this.session});if((!!O)&&O.done&&Array.isArray(O.user)){this.friends.length=0;for(var N=0;N<O.user.length;N++){this.friends.push(O.user[N].username)}return O.user}return false},addFriend:function i(P,N){if(this.friends.indexOf(P)>-1){return false}var O=this.callAPI(arguments.callee.name,{sid:this.session,username:P,textmsg:N});if((!!O)&&O.done){this.friends.push(P);return true}return false},confirmAddFriend:function m(O){if(this.friends.indexOf(O)>-1){return false}var N=this.callAPI(arguments.callee.name,{sid:this.session,username:O});if((!!N)&&N.done){this.friends.push(O);return true}return false},removeFriend:function A(P){if(this.friends.indexOf(P)==-1){return false}var N=this.callAPI(arguments.callee.name,{sid:this.session,username:P});if((!!N)&&N.done){var O=this.friends.indexOf(P);if(O>-1){this.friends.splice(O,1);return true}}return false},listBlock:function r(){var O=this.callAPI(arguments.callee.name,{sid:this.session});if((!!O)&&O.done&&Array.isArray(O.user)){this.blocks.length=0;for(var N=0;N<O.user.length;N++){this.blocks.push(O.user[N].username)}return O.user}return false},block:function w(N){if(this.friends.indexOf(N)>-1){return false}var O=this.callAPI(arguments.callee.name,{sid:this.session,username:N});if((!!O)&&O.done){this.blocks.push(N);return true}return false},unblock:function q(N){if(this.friends.indexOf(N)==-1){return false}var O=this.callAPI(arguments.callee.name,{sid:this.session,username:N});if((!!O)&&O.done){var P=this.friends.indexOf(N);if(P>-1){this.blocks.splice(P,1);return true}}return false},setTag:function H(O){var P=this.callAPI(arguments.callee.name,{sid:this.session,tag:O});if((!!P)&&P.done){this.tag.length=0;for(var N=0;N<O.length;N++){this.tag.push(O[N])}return true}return false},getTag:function B(){var P=this.callAPI(arguments.callee.name,{sid:this.session});if((!!P)&&P.done){var O=P.tag;this.tag.length=0;for(var N=0;N<O.length;N++){this.tag.push(O[N])}return true}return false},updateStatus:function c(O){var P=this.callAPI(arguments.callee.name,{sid:this.session,status:O});if((!!P)&&P.done){for(var N in O){this.status[N]=O[N]}return true}return false},queryPresence:function G(O){var N=this.callAPI(arguments.callee.name,{sid:this.session,user:O});return((!!N)&&N.done)?N.presence:false},searchUser:function f(N,P){var O=this.callAPI(arguments.callee.name,{sid:this.session,tag:N,distance:P});return((!!O)&&O.done)?O.user:false},searchUserComplex:function E(N){var O=this.callAPI(arguments.callee.name,{sid:this.session,filter:N});return((!!O)&&O.done)?O.user:false},inviteJoinGroup:function e(N,O){var P=this.callAPI(arguments.callee.name,{sid:this.session,name:N,group:O});return((!!P)&&P.done)?true:false},quitGroup:function x(N){var O=this.callAPI(arguments.callee.name,{sid:this.session,group:N});return((!!O)&&O.done)?true:false},chat:function K(N,O){var P=this.callAPI(arguments.callee.name,{sid:this.session,group:O,what:N});return((!!P)&&P.done)?true:false},findRoom:function z(N){var O=this.callAPI(arguments.callee.name,{sid:this.session,name:N});return((!!O)&&O.done)?O.room:false},enterRoom:function l(N,O){var P=this.callAPI(arguments.callee.name,{sid:this.session,name:N,password:O});return((!!P)&&P.done)?P.name:false},leaveRoom:function a(N){var O=this.callAPI(arguments.callee.name,{sid:this.session,name:N});return((!!O)&&O.done)?true:false},say:function b(N){var O=this.callAPI(arguments.callee.name,{sid:this.session,what:N});return((!!O)&&O.done)?true:false},sms:function k(N,O){var P=this.callAPI(arguments.callee.name,{sid:this.session,name:N,what:O});return((!!P)&&P.done)?true:false}});hotjs.Social.AjaxClient=y;hotjs.Social.User=g})();hotjs=hotjs||{};hotjs.Util=hotjs.Util||{};(function(){var b=null;hotjs.Util={getDeviceInfo:function(f){if(b!==null&&typeof f==="undefined"){return b}var k=null;var m=false;var g=typeof CanvasRenderingContext2D!=="undefined";var e=false;var j=false;var c=false;var l=(/chrome/i.test(f))?true:false;var f=f||navigator.userAgent;var i=0;if(/android/i.test(f)){e=true;k=f.toString().match(/android ([0-9]\.[0-9])\.?([0-9]?)/i);if(k&&k[1]){i=(parseFloat(k[1])+(k[2]?k[2]*0.01:0)).toFixed(2)}}else{if(/(iphone|ipad|ipod)/i.test(f)){j=true;k=f.toString().match(/([0-9]_[0-9])/i);if(k&&k[1]){i=parseFloat(k[1].replace(/_/,"."))}}else{m=true;if(/(MSIE)/i.test(f)){c=true;k=f.toString().match(/MSIE ([0-9])/i);if(k&&k[1]){i=parseInt(k[1],10)}}}}b={supportCanvas:g,desktop:m,android:e?i:false,ios:j?i:false,ie:c?i:false,chrome:l};return b},getBoundaryRect:function(e){var l=e[0][0];var j=e[0][0];var k=e[0][1];var g=e[0][1];for(var f=1,c=e.length;f<c;f++){l=Math.min(l,e[f][0]);j=Math.max(j,e[f][0]);k=Math.min(k,e[f][1]);g=Math.max(g,e[f][1])}return{left:l,right:j,top:k,bottom:g}},getRectPoints:function(c){return[[c.left,c.top],[c.right,c.top],[c.right,c.bottom],[c.left,c.bottom]]},cloneObject:function(c){var f={};for(var e in c){f[e]=c[e]}return f},addEventListener:function(e,g,f,c){if("addEventListener" in e){e.addEventListener(g,f,c)}else{e.attachEvent("on"+g,f,c)}},removeEventListener:function(e,g,f,c){if("removeEventListener" in e){e.removeEventListener(g,f,c)}else{e.detachEvent("on"+g,f,c)}},stopEventDefault:function(c){c=c||window.event;if("preventDefault" in c){c.preventDefault()}c.returnValue=false},getClientRect:function(f){var k=f.ownerDocument||f.document||document;var c=k.documentElement;var i=k.body;var g={};if("getBoundingClientRect" in f){var e=f.getBoundingClientRect();g.left=e.left;g.left+=c.scrollLeft||i.scrollLeft;g.top=e.top;g.top+=c.scrollTop||i.scrollTop;g.width=e.width;g.height=e.height;g.right=e.right;g.right+=c.scrollLeft||i.scrollLeft;g.bottom=e.bottom;g.bottom+=c.scrollTop||i.scrollTop}else{g.left=0;g.top=0;g.width=f.offsetWidth;g.height=f.offsetHeight;for(var j=f;j;j=j.offsetParent){g.left+=j.offsetLeft;g.top+=j.offsetTop}for(var j=f.parentNode;j;j=j.parentNode){if(j.tagName==="BODY"){break}if(j.tagName==="TR"){g.top+=2}g.left-=j.scrollLeft;g.top-=j.scrollTop}g.right=g.left+g.width;g.bottom=g.top+g.height}return g}};if(hotjs.Util.getDeviceInfo().ios){window.addEventListener("load",function(){setTimeout(function(){document.body.scrollTop=0},300)})}if(!Function.prototype.bind){Function.prototype.bind=function(c){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable")}var i=Array.prototype.slice.call(arguments,1),g=this,e=function(){},f=function(){return g.apply(this instanceof e?this:c,i.concat(Array.prototype.slice.call(arguments)))};e.prototype=this.prototype;f.prototype=new e();return f}}var a=function(){hotjs.base(this);this.nMin=1;this.nMax=500;this.loopBench=false;this.fpsData=[];this.dtSumB=0;this.nCur=this.nMax;this.marginFormula=40;this.formula=false};hotjs.inherit(a,hotjs.View,{setBenchmarkRange:function(e,c){this.nMin=Math.min(e,c);this.nMax=Math.max(e,c);this.nCur=this.nMax;return this},showFormula:function(c){if(c==undefined){c=(!this.formula)}this.formula=c;return this},benchFPS:function(f,c,e){this.nMin=f;this.nMax=c;this.fpsData=[];this.dtSumB=0;this.nCur=this.nMin;this.loopBench=(!!e);return true},benchStop:function(){this.nCur=this.nMax;return true},update:function(c){a.supClass.update.call(this,c);if(this.nCur<this.nMax){this.dtSumB+=c;if(this.dtSumB>=0.2){this.dtSumB=0;this.curScene.addItem();this.nCur++;var e=(this.height()-this.marginFormula*2)/60;this.fpsData.push(e*this.fps);if(this.nCur>=this.nMax){if(!!this.loopBench){this.nCur=this.nMin;this.fpsData.length=0}}}}return true},drawFormula:function(q){q.save();var j=this.marginFormula,l=this.height()-this.marginFormula;var e=this.width()-this.marginFormula*2,k=this.height()-this.marginFormula*2;q.beginPath();q.strokeStyle="black";q.fillStyle="black";for(var g=0;g<6;g++){q.beginPath();q.moveTo(j,this.marginFormula+g*k/6);q.lineTo(j+e,this.marginFormula+g*k/6);q.stroke()}q.beginPath();q.moveTo(j,this.marginFormula);q.lineTo(j,l);q.lineTo(this.width()-this.marginFormula,l);q.stroke();q.fillText("60 fps",j-20,this.marginFormula-10);q.fillText(""+this.nMax,this.width()-this.marginFormula-20,l+20);q.beginPath();q.strokeStyle="red";var m=e/(this.nMax-this.nMin);if(this.fpsData.length>0){q.moveTo(j,l-this.fpsData[0]);for(var g=1;g<this.fpsData.length;g++){q.lineTo(j+g*m,l-this.fpsData[g])}}q.stroke();q.restore()},draw:function(e){a.supClass.draw.call(this,e);if(this.formula){this.drawFormula(e)}}});hotjs.Util.BenchLab=a})();(function(){var a=function(){hotjs.base(this);this.subnodes=[];this.param={width:300,height:400,margin:20,padding:10,rows:1,cols:1,dir:0}};hotjs.inherit(a,hotjs.Node,{addNode:function(b){a.supClass.addNode.call(this,b);this.updateLayout();return this},setParam:function(c){for(var b in c){this.param[b]=c[b]}if(this.param.dir==0){this.setMoveable(true,false)}else{this.setMoveable(false,true)}this.updateLayout();return this},fixPos:function(){if(this.pos[0]>0){this.pos[0]=0}if(this.pos[1]>0){this.pos[1]=0}var b=this.container.width()-this.size[0];var c=this.container.height()-this.size[1];if(this.pos[0]<b){this.pos[0]=b}if(this.pos[1]<c){this.pos[1]=c}},onTouchEnd:function(f){a.supClass.onTouchEnd.call(this,f);var c=this.pos;var j=this.param;if(j.dir==0){var i=Math.floor(this.pos[0]/j.width)*j.width;var e=i+j.width;if(e>=j.width){e=0}if(this.gesture[0]<=0){c=[i,c[1]]}else{c=[e,c[1]]}}else{var g=Math.floor(this.pos[1]/j.height)*j.height;var b=g+j.height;if(b>j.height){b=0}if(this.gesture[1]<=0){c=[c[0],g]}else{c=[c[0],b]}}hotjs.Anim.create(this,"MoveTo",{to:c,duration:0.3}).play()},updateLayout:function(){var s=this.subnodes;var m=this.param;var z=m.margin||0;var y=m.padding||0;var v=m.spacing||0;var f=m.rows||1;var j=m.cols||1;var q=m.dir?1:0;var g=m.width||300;g-=z*2;var x=m.height||400;x-=z*2;var b=g/j,k=x/f;var A=0,l=0;for(var t=0,e=0,c=0;t<s.length;t++){var r=s[t];r.pos[0]=b*(c+j*A)+z*(1+A*2)+(b-r.size[0])/2;r.pos[1]=k*(e+f*l)+z*(1+l*2)+(k-r.size[1])/2;if(++c>=j){c=0;if(++e>=f){e=0;if(q){l++}else{A++}}}}A++;l++;if(c==0&&e==0){if(q){if(l>1){l--}}else{if(A>1){A--}}}this.size[0]=(b*j+z*2)*A;this.size[1]=(k*f+z*2)*l;return this},draw:function(E){E.save();var z=this.subnodes;var t=this.param;var F=t.margin||0;var D=t.padding||0;var B=t.spacing||0;var l=t.rows||1;var q=t.cols||1;var v=t.dir?1:0;var g=t.width||300;g-=F*2;var H=t.height||400;H-=F*2;var b=g/q,r=H/l;for(var A=0,f=0,e=0,G=0,s=0;A<z.length;A++){var k=b*(e+q*G)+F*(1+G*2)+B;var j=r*(f+l*s)+F*(1+s*2)+B;var m=b-B*2;var C=r-B*2;if(!!this.bgcolor){E.fillStyle=this.bgcolor;E.fillRect(k,j,m,C)}if(!!this.color){E.strokeStyle=this.color;E.strokeRect(k,j,m,C)}if(++e>=q){e=0;if(++f>=l){f=0;if(v){s++}else{G++}}}}E.restore();return this}});hotjs.ShowBoard=a})();hotjs=hotjs||{};hotjs.i18n={defaultLang:"en",cookievalid:86400000,text:{},put:function(e,c){if(this.text[e]===undefined){this.text[e]={}}var a=this.text[e];for(var b in c){a[b]=c[b]}return this},extractLang:function(c){var e;for(var a in c){var b=c[a].split("=");if(b[0]==="lang"){e=b[1].length>2?(b[1].charAt(0)+b[1].charAt(1)):b[1]}}return e},getUrlLang:function(){if(window.location.search.length<2){return undefined}return this.extractLang(window.location.search.substring(1).split("&"))},getCookieLang:function(){return this.extractLang(document.cookie.split("; "))},getLang:function(){if(typeof this.lang!=="string"){if(typeof(this.lang=this.getUrlLang())==="string"){}else{if(typeof(this.lang=this.getCookieLang())==="string"){}else{if(typeof(this.lang=navigator.language)==="string"){}else{if(typeof(this.lang=navigator.userLanguage)==="string"){}else{this.lang=this.defaultLang}}}}if(this.lang.length>2){this.lang=this.lang.charAt(0)+this.lang.charAt(1)}}return this.lang},setLang:function(f,a){this.lang=f;if(a){var e=window.location,b=new Date(),c=b.getTime();c+=this.cookievalid;b.setTime(c);document.cookie="lang="+f+";path="+e.pathname+";domain="+e.host+";expires="+b.toGMTString()}return this},get:function(a){var b=a.split("."),e=this.getLang(),c=this.text[e];while(typeof c!=="undefined"&&b.length>0){c=c[b.shift()]}return typeof c==="undefined"?e+"."+a:c},t1:function(c){if(typeof c==="object"&&c instanceof Element){var b=$(c),a=b.attr("i18n");b.removeClass("I18N");if(typeof a==="undefined"){a=b.text()}b.attr("i18n",a).text(this.get(a))}return this},translate:function(b){var c=this.getLang();if(typeof this.text[c]==="undefined"){resources.load("lang/"+c+".lang.js");return this}if(typeof b==="undefined"){b=$("[I18N]");$(".I18N").each(function(){if(!$.contains(b,this)){b=b.add(this)}})}if(b instanceof jQuery){for(var a in b){this.t1(b[a])}}else{this.t1(b)}return this}};hotjs=hotjs||{};hotjs.AI=hotjs.AI||{};(function(){var c=function(){hotjs.base(this)};hotjs.inherit(c,hotjs.Class,{startup:function(e){},solve:function(e){return{}},reset:function(){},shutdown:function(){}});var a=function(){hotjs.base(this);this.data=[];this.mapping=[]};hotjs.inherit(a,c,{init:function(e,g,f){this.data=hotjs.Matrix.create(e,g,f);this.resetMapping();return this},setValue:function(e){this.data=hotjs.Matrix.setValue(this.data,e);return this},resetMapping:function(){var l=this.data;var s=[];for(var k=0,e=l.length;k<e;k++){var q=l[k],g=[];for(var f=0,t=q.length;f<t;f++){g.push([f,k])}s.push(g)}this.mapping=s;return this},clone:function(){var e=new (this.constructor)();e.data=hotjs.Matrix.copy(this.data);e.mapping=hotjs.Matrix.copy(this.mapping);return e},copy:function(e){this.data=hotjs.Matrix.copy(e.data);this.mapping=hotjs.Matrix.copy(e.mapping);return this},getData:function(){return this.data},getMapping:function(){return this.mapping},importData:function(e){this.data=hotjs.Matrix.copy(e);this.resetMapping();return this},importDataFromString:function(f,g,e){this.data=hotjs.Matrix.fromString(f,g,e);this.resetMapping();return this},toString:function(f,e){return hotjs.Matrix.toString(this.data,f,e)},exchangeValue:function(f,t){var l=this.data;for(var k=0,e=l.length;k<e;k++){var q=l[k];for(var g=0,s=q.length;g<s;g++){if(q[g]==f){q[g]=t}else{if(q[g]==t){q[g]=f}}}}return this},getPosByValue:function(f){var q=[];var l=this.data;for(var k=0,e=l.length;k<e;k++){var s=l[k];if(Number(s.join(""))===0){continue}for(var g=0,t=s.length;g<t;g++){if(s[g]===f){q.push([g,k])}}}return q},inverse:function(){this.data=hotjs.Matrix.inverse(this.data);this.mapping=hotjs.Matrix.inverse(this.mapping);return this},flipLeftRight:function(){var w=[],e=[];var f=this.data,q=this.mapping;for(var v=0,l=f.length;v<l;v++){var z=f[v],y=[],k=q[v],x=[];for(var r=0,g=z.length;r<g;r++){y.push(z[g-1-r]);x.push(k[g-1-r])}w.push(y);e.push(x)}this.data=w;this.mapping=e;return this},flipUpDown:function(){var f=[],e=[];var j=this.data,k=this.mapping;for(var g=j.length-1;g>=0;g--){f.push(j[g]);e.push(k[g])}this.data=f;this.mapping=e;return this},leanRight45:function(){var v=[],e=[];var f=this.data,l=this.mapping;var k=f.length,g=f[0].length;var q=k+g-1;for(var s=0;s<q;s++){var x=[],w=[];for(var r=0;r<=s;r++){if((s-r)<k&&r<g){x.push(f[s-r][r]);w.push(l[s-r][r])}}v.push(x);e.push(w)}this.data=v;this.mapping=e;return this},leanLeft45:function(){var v=[],e=[];var f=this.data,l=this.mapping;var k=f.length,g=f[0].length;var q=k+g-1;for(var s=0;s<q;s++){var x=[],w=[];for(var r=s;r>=0;r--){if((s-r)<k&&r<g){x.push(f[s-r][g-1-r]);w.push(l[s-r][g-1-r])}}v.push(x);e.push(w)}this.data=v;this.mapping=e;return this}});var b=function(){hotjs.base(this)};hotjs.inherit(b,c,{solve:function(f){var e=f.matrix;var j=f.from;var i=f.to;var g=[];return g}});hotjs.AI.BasicAI=c;hotjs.AI.Matrix=a;hotjs.AI.PathFinder=b})();