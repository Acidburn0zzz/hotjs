<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>QUnit: New test cases</title>
<link rel="stylesheet" href="lib/qunit-1.11.0.css">
</head>
<body>
<div id="qunit"></div>
<div id="qunit-fixture"></div>

<script src="lib/qunit-1.11.0.js"></script>
<script src="lib/jquery-1.9.js"></script>
<script src="../hotjs.js"></script>
<script>

hotjs.require('../math.js');
hotjs.require('../ai.js');
hotjs.require('../social.js');
hotjs.require('../i18n.js');

module('New Module');
test('UT of New Module', function(){
	
	ok( true, 'hello, hotjs.AI.');
	
	var a = { 'test': 1, 1001: 2 };
	equal( a[ 'test' ], 1, 'use string as key of mapping' );
	equal( a[ 1001 ], 2, 'use integer as key of mapping' );

	var ss = document.getElementsByTagName('script');
	for(var i=0; i<ss.length; i++) {
		ok( true, 'js: ' + ss[i].src );
	}
	
	equal( hotjs.getDirPath('../../test.js'), '../..', 'getDirPath' );
	str = hotjs.getAbsPath('../../../test.js', '../../hello.js');
	equal( str, '../test.js', 'getAbsPath' );
	
	ok( typeof hotjs.require == 'function', 'hotjs.require is function.');
	ok( typeof requireScripts == 'function', 'requireScripts fallback defined.');
	
});

module('I18N');
test('I18N multi-language APIs', function(){
	hotjs.i18n.put('zh',{
		mygod: 'my god',
		lady: {
			gaga: 'lady gaga',
			papa: 'lady papa'
		}
	})
	
	ok( true, 'current language: ' + hotjs.i18n.getLang() );
	equal( hotjs.i18n.get('mygod'), 'my god', 'hotjs.i18n.get(\'mygod\')');
	equal( hotjs.i18n.get('lady.gaga'), 'lady gaga', 'hotjs.i18n.get(\'lady.gaga\')');
});

module('Social APIs');
test("Basic operations of Social APIs", function() {

	var user = new hotjs.Social.User();
	
	ok( true, 'hello!' );

	// load API from remote inf file. 
	//var ret = user.loadAPI( "./sns/user.inf", "user", 1.05 );
	//equal( ret, true, "Load API definition from sns inf." );
	
	user.onMsgParse = function(msg) {
		//console.log( msg );
		//if( msg.api == "say" ) alert( msg.who + " say: " + msg.what );
	};
	
	//ok( user.login("zhang3", "abc123", "Gomoku", 1.0, 5000), "login to sns, start heartbeat." );
	
});


	</script>
</body>
</html>
