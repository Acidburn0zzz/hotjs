<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta http-equiv="Expires" CONTENT="0">
<meta http-equiv="Cache-Control" CONTENT="no-cache">
<meta http-equiv="Pragma" CONTENT="no-cache">
<meta name="viewport"
	content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
<script type="text/javascript" src="../resource.js"></script>
<script type="text/javascript" src="../sprite.js"></script>
<script type="text/javascript" src="../hotjs.js"></script>
<script type="text/javascript" src="../math.js"></script>
<script type="text/javascript" src="../physics.js"></script>

</head>
<body>
	<div id="view1" style="display: inline-block; margin: 0px;"></div>
	<script>
	//var WIDTH = 480, HEIGHT = 320;
	resources.load([
		'redball.png',
		'smallbird.png'
	]);
	
	var balls = [];
	
	var add_ball = function(){};
	var remove_ball = function(){};
	
	resources.onReady(function() {
		var view1 = (new hotjs.View()).setContainer('view1').setSize(WIDTH,HEIGHT).showFPS(true);

		var room = (new BallRoom()).setSize(WIDTH, HEIGHT).setColor("#eeeeee").showGrid(true);
		view1.addScene(room);
		
		add_ball = function() {
			b = (new Ball('red')).setImage(resources.get('redball.png'));
			var x = WIDTH/5 + Math.random() * 100;
			b.setPos(x + b.size[0]/2,HEIGHT-b.size[1]/2).setVelocity(0,0).setAccel(0,0);
			room.addNode(b);
			balls.push(b);			
		};
		
		remove_ball = function() {
			if(balls.length > 0) {
				room.removeNode( balls.pop() );
			}
		};

		for( var i=0; i<2; i++ ) {
			add_ball();
		}		
		
		var app = (new hotjs.App()).addView(view1).start();
	});
	
	function kick_ball(i){
		var b = balls[i];
		if( b != undefined ) {
			var vx = Math.random() * 40 - 20;  // range [-10,10] 
			var vy = -10 - Math.random() * 10; // range [-10, -20] 
			b.setVelocity(vx,vy);
		}
	}	
	</script>
	<br>
	<input type="button" value="Kick Ball 1" onClick="kick_ball(0);">
	<input type="button" value="Kick Ball 2" onClick="kick_ball(1);">
	<input type="button" value="Add 1 Ball" onClick="add_ball();">
	<input type="button" value="Remove 1 Ball" onClick="remove_ball();">
</body>

</html>
